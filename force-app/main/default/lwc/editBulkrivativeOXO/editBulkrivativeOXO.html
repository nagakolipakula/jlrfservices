<template>
    <div class="container">
        <!-- Input for Market Filter -->
        <lightning-input
            type="text"
            label="Search by Market Name"
            placeholder="Enter Market Name (e.g., GLOBAL)"
            onchange={handleMarketChange}>
        </lightning-input>

        <!-- Dual-Listbox for Derivatives -->
        <lightning-dual-listbox
            name="discoveryDerivatives"
            label="Choose Discovery Derivatives"
            source-label="Available"
            selected-label="Selected"
            options={filteredDerivativesOptions}
            value={selectedDerivatives}
            onchange={handlePicklistChange}>
        </lightning-dual-listbox>
    </div>

    <div class="button">
        <lightning-button
            class="fetch-button"
            label="SEARCH"
            onclick={fetchBulkDerivatives}
            variant="brand">
        </lightning-button>
    </div>

    <!-- Datatable to Display Results -->
    <template if:true={data}>
        <lightning-datatable
            key-field="Id"
            data={data}
            columns={columns}
            draft-values={draftValues}
            onsave={handleSave}
            hide-checkbox-column
            suppress-bottom-bar>
        </lightning-datatable>
    </template>

    <!-- No Data Message -->
    <template if:false={data}>
        <p style="text-align: center; margin-top: 1rem;">No records found.</p>
    </template>
</template>